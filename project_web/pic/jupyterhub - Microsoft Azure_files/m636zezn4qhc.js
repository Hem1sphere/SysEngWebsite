define("MsPortalImpl/Base/Base.Router.Blade",["require","exports","f","i","o","ko","Fx/ResourceManagement","MsPortalImpl/Base/Base.ArmIdHelpers","MsPortalImpl/Base/Base.Router","MsPortalImpl/UI/Compositions/UI.Composition.PropertyBinding","MsPortalImpl/UI/UI.AuthStateManager"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";function w(n,t,r,u,h,c,a,v){var w=y(t.name,r.name,u);if(v||w){var p=typeof a,k=f.unwrap(a),b=e.ArmId.parse(k);return w?s.getGalleryDeepLink(w,undefined,t.name,u):p==="string"&&(o.isResourceAtAnyLevel(b)||b.kind===4||b.kind===1)?l(n,a,undefined,h):a&&p==="object"&&a.id&&i.keysLength(a)===1&&o.isResourceAtAnyLevel(e.ArmId.parse(a.id))?l(n,a.id,undefined,h):(p==="string"||p==="number")&&c?s.getAssetDeepLink(n,{name:t.name},c,k,undefined):s.getBladeDeepLink(t,r.name,undefined,u,!0,h)}}function l(n,t,i,r){var e=encodeURI(t),u,f;return r&&(e+="/"+r),u=n.get(c.AuthStateManager).getSignedInUserTenant(),f=new a.UriBuilder(i),f.fragment=(u&&"@"+u+"/")+"resource"+e,f.toString()}function y(n,t,i){var s=null,c=n===p.Marketplace,l=t===v.BladeNames.Hubs.CreateHubBlade,e,f,u,o;if(i){if(c&&l)return typeof i.package=="function"?i.package():null;if(e=h.getModelValue(i,"_provisioningContext.marketplaceItem.launchingContext.galleryItemId").value,e)return e;f=i.internal_bladeCallerParams&&i.internal_bladeCallerParams();u=void 0;f?u=h.getModelValue(f.providerConfig&&r.fromSerializableObject(f.providerConfig),"provisioningConfig.galleryCreateOptions.galleryItem").value:(o=i["collectorBindingInternals-inputs"],o&&(u=(((o._latestValue||{}).options||{}).galleryOptions||{}).galleryItem));s=u&&u.id&&u.version&&u.id.replace("."+u.version,"")}return s}u.defineProperty(t,"__esModule",{value:!0});var a=i.Base,v=a.Constants,p=v.ExtensionNames;t.getDeepLink=w;t.getResourceDeepLink=l;t.getGalleryItemIdFromBladeComposition=y}))