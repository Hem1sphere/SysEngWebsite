define("MsPortalImpl/Services/Services.PortalPrefetch",["require","exports","f","i","MsPortalImpl/Services/Services.Storage"],(function(n,t,i,r,u){"use strict";var f;return (function(n){function y(n,u,y,p){function d(){b&&(b.remove(),b=null)}function it(){d();b=$(r.createElement("iframe")).addClass("fxs-extension-frame").attr({src:tt,tabindex:-1}).appendTo(v)}var w=new l.UriBuilder(t.location.href),k=w.query,tt,b,g,nt;k.clear();s.enabled||k.setParameter(s.disableParameter,h);k.setParameters({idle:h,trustedAuthority:w.getAuthority()});w.path=i.ensureSuffix(w.path,"/")+"cobrand/";w.fragment="";tt=w.toString();p>a&&(g=y.clearValue(f,o,e),g&&(c=function(){y.getValue(f,o,e)||y.setValue(f,o,g,e)}));nt=u.addCallbacks({onIdle:it,onBusy:d});n.registerForDispose((function(){c();u.removeCallbacks(nt);d();nt=null}));it()}var l=i.Base,t=window,s=t.fx.environment.cdn,f=u.ComponentName.Redirect,e=0,a=25e3,o="CdnIndexRandomness",h="true",v=$(t.document.body),c=i.noop;n.start=y})(f||(f={})),f}))