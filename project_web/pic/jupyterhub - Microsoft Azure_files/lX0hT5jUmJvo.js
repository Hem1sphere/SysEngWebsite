define("MsPortalImpl.Controls/Fields/CustomHtmlField",["require","exports","f","i","o","ko","MsPortalImpl.Controls/Fields/Base/FormValidation","MsPortalImpl.Controls/Fields/Base/LabelAndBalloonWidget","MsPortalImpl.Controls/Controls/Base/Loadable","_generated/Less/MsPortalImpl/CustomForm.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){var t="msportalfx-form-formelement",h="msportalfx-customHtml",c=jQuery,l=(function(n){function s(u,e,s){var l=n.call(this,u,e,s)||this,a;return l._vms=f.observableArray(),l.element.addClass(h).addClass(t),l._htmlContentDiv=c(r.createElement("div",{"class":"azc-formElementContainer","data-bind":"untrustedHtml: { html: htmlTemplate, data: innerViewModel, isolated: isolated }"})),a=new o.LabelAndBalloonWidgetHelper(l.ltm,i.extend({infoBalloonTabbable:!0},e)),a.appendWidgetToDom(l.element,l._htmlContentDiv),a.insertLabelBefore(l._htmlContentDiv),a.insertSubLabelAfter(l._htmlContentDiv),l._bindElement(e,l._htmlContentDiv),l._updateTemplate(),l.options.htmlTemplate.subscribe(l.ltm,(function(){l._updateTemplate()})),l}return __extends(s,n),s.prototype.dispose=function(){this._cleanElement("msportalfx-form-formelement","msportalfx-customHtml");this._htmlContentDiv&&(this._cleanDescendants(),this._htmlContentDiv.remove(),this._htmlContentDiv=null);n.prototype.dispose.call(this)},u.defineProperty(s.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),s.prototype._updateTemplate=function(){var n=this,t=e.gatherFormFields(this._htmlContentDiv).map((function(n){return n.viewmodel}));this._vms(t);this._vmsLifetimeManager&&this._vmsLifetimeManager.dispose();this._vmsLifetimeManager=this.ltm.createChildLifetime();f.reactor(this._vmsLifetimeManager,(function(){var t=n._vms();n.options.dirty(t.some((function(n){return n&&n.dirty&&n.dirty()})))}));f.reactor(this._vmsLifetimeManager,(function(){var t=e.gatherFormFields(n._htmlContentDiv).map((function(n){return n.viewmodel}));n.options.valid(t.every((function(n){return n&&n.valid?n.valid():!0})))}));this.options._msPortalFxClearValidation((function(){var t=[];return n._vms().forEach((function(n){if(typeof n.clearValidation=="function"){var i=n.clearValidation();i&&t.push(i)}})),Q.all(t)}));this.options._msPortalFxTriggerValidation((function(){var t=n._vms().map((function(n){if(typeof n.triggerValidation=="function")return n.triggerValidation()})).filter(i.identity);return Q.all(t).then((function(n){return n.every(i.identity)}))}))},s})(s.Widget);n.Widget=l})(h||(h={})),h}))